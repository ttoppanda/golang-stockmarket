<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="chart.css" />
        <link rel="stylesheet" href="https://d3fc.io/d3fc.css"/>
    </head>
    <body>
        <div id="streaming-chart" class="chart large"></div>
        <script src="https://d3fc.io/d3fc.bundle.js"></script>
        <script src="data.js"></script>
        <script src="chart.js"></script>
        <script>
            var chart = new Chart({
                data: window._data,
                selector: "#streaming-chart",
                label: "STOCK chart",
                periodMs: 1000 * 60// * 60 * 24;
            });

            chart.draw();
            
            if (window.WebSocket){
                socket = new WebSocket("ws://localhost:8004/ws");

                socket.onmessage = function(e){
                    console.log(e.data);
                };

                socket.onclose = function(e){
                    console.log("connection closed");
                };
            }
            
            /*
            setInterval(function(){
                if (stream.length !== 0){
                    chart.addData(stream.next());
                    chart.draw();
                }
            }, 1000);
            */
        </script>
    </body>
</html>
